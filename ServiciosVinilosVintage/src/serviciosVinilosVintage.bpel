<?xml version="1.0" encoding="UTF-8" ?>
<process
    name="serviciosVinilosVintage"
    targetNamespace="http://enterprise.netbeans.org/bpel/ServiciosVinilosVintage/serviciosVinilosVintage"
    xmlns:tns="http://enterprise.netbeans.org/bpel/ServiciosVinilosVintage/serviciosVinilosVintage"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:sxt="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Trace" 
    xmlns:sxed="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Editor2"
    xmlns:sxat="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Attachment"
    xmlns:sxeh="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/ErrorHandling">
    <import namespace="http://j2ee.netbeans.org/wsdl/ServiciosVinilosVintage/src/ServicioVinilosVintach" location="DescriptorBPEL/ServicioVinilosVintach.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://enterprise.netbeans.org/bpel/WSMusicaPedidosWrapper" location="WSMusicaPedidosWrapper.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://wsmusicapedidos/" location="http://localhost:8080/WS_Musica_Pedidos/WSMusicaPedidos?WSDL" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://enterprise.netbeans.org/bpel/WS_Musica_EnviosWrapper" location="WS_Musica_EnviosWrapper.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://wsmusicaenvios/" location="http://localhost:8080/WS_Musica_Envios/WS_Musica_Envios?WSDL" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://enterprise.netbeans.org/bpel/WSMusicaCreditoWrapper" location="WSMusicaCreditoWrapper.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://wsmusicacredito/" location="http://localhost:8080/WS_Musica_Credito/WSMusicaCredito?WSDL" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <partnerLinks>
        <partnerLink name="WSPedidos" xmlns:tns="http://enterprise.netbeans.org/bpel/WSMusicaPedidosWrapper" partnerLinkType="tns:WSMusicaPedidosLinkType" partnerRole="WSMusicaPedidosRole"/>
        <partnerLink name="WSCredito" xmlns:tns="http://enterprise.netbeans.org/bpel/WSMusicaCreditoWrapper" partnerLinkType="tns:WSMusicaCreditoLinkType" partnerRole="WSMusicaCreditoRole"/>
        <partnerLink name="WSEnvios" xmlns:tns="http://enterprise.netbeans.org/bpel/WS_Musica_EnviosWrapper" partnerLinkType="tns:WS_Musica_EnviosLinkType" partnerRole="WS_Musica_EnviosRole"/>
        <partnerLink name="ServicioVinilosVintach" xmlns:tns="http://j2ee.netbeans.org/wsdl/ServiciosVinilosVintage/src/ServicioVinilosVintach" partnerLinkType="tns:ServicioVinilosVintach" myRole="ServicioVinilosVintachPortTypeRole"/>
    </partnerLinks>
    <variables>
        <variable name="AltaPedidoOut" xmlns:tns="http://wsmusicapedidos/" messageType="tns:altaPedidoResponse"/>
        <variable name="AltaPedidoIn" xmlns:tns="http://wsmusicapedidos/" messageType="tns:altaPedido"/>
        <variable name="ServicioVinilosVintachOperationOut" xmlns:tns="http://j2ee.netbeans.org/wsdl/ServiciosVinilosVintage/src/ServicioVinilosVintach" messageType="tns:ServicioVinilosVintachOperationResponse"/>
        <variable name="ServicioVinilosVintachOperationIn" xmlns:tns="http://j2ee.netbeans.org/wsdl/ServiciosVinilosVintage/src/ServicioVinilosVintach" messageType="tns:ServicioVinilosVintachOperationRequest"/>
    </variables>
    <sequence>
        <receive name="RecibirPedido" createInstance="yes" partnerLink="ServicioVinilosVintach" operation="ServicioVinilosVintachOperation" xmlns:tns="http://j2ee.netbeans.org/wsdl/ServiciosVinilosVintage/src/ServicioVinilosVintach" portType="tns:ServicioVinilosVintachPortType" variable="ServicioVinilosVintachOperationIn"/>
        <assign name="Assign1">
            <copy>
                <from variable="ServicioVinilosVintachOperationIn" part="idCliente"/>
                <to>$AltaPedidoIn.parameters/id_clte</to>
            </copy>
            <copy>
                <from variable="ServicioVinilosVintachOperationIn" part="listaProductos"/>
                <to>$AltaPedidoIn.parameters/lista_it</to>
            </copy>
            <copy>
                <from>$AltaPedidoOut.parameters/return</from>
                <to variable="ServicioVinilosVintachOperationOut" part="idPedido"/>
            </copy>
        </assign>
        <invoke name="altaPedido" partnerLink="WSPedidos" operation="altaPedido" xmlns:tns="http://wsmusicapedidos/" portType="tns:WSMusicaPedidos" inputVariable="AltaPedidoIn" outputVariable="AltaPedidoOut"/>
        <reply name="NumPedido" partnerLink="ServicioVinilosVintach" operation="ServicioVinilosVintachOperation" xmlns:tns="http://j2ee.netbeans.org/wsdl/ServiciosVinilosVintage/src/ServicioVinilosVintach" portType="tns:ServicioVinilosVintachPortType" variable="ServicioVinilosVintachOperationOut"/>
    </sequence>
</process>
